# 커넥션 풀 (Connection Pool)

## DB Connection

DB Connection 이란 애플리케이션과 데이터베이스 서버가 통신할 수 있도록 하는 기능이다.

### Connection 객체가 반환되는 과정

1. **DB 드라이버 로드**: 우선 사용하려는 DB 에 해당하는 `JDBC 드라이버`를 로드해야 한다.
2. **DB 연결 정보 설정**: 연결하려는 DB 의 URL, 사용자 이름, 비밀번호 등의 연결 정보를 설정한다.
3. **Connection 객체 생성**: `DriverManager` 클래스를 사용하여 DB 와 연결 하고, 이 연결을 나타내는 `Connection` 객체를 얻는다.

>**(참고) jdbc 드라이버란**
자바가 다양한 데이터베이스를 지원할 수 있는 이유는 각 데이터베이스에 맞는 JDBC 드라이버가 구현되어 있기 때문이다.
이 드라이버는 Java 애플리케이션과 각 DB 간의 통신을 중개하여, 동일한 JDBC API 를 사용하여도 각 DB에 적합한 프로토콜로 요청을 전달하고 응답을 받을 수 있다.

### Connection 이후

1. **Connection 객체 사용**: 반환된 Connection 객체를 사용하여 DB 관련 작업(쿼리 실행, 트랜잭션 관리 등)을 수행한다.
2. **연결 종료**: DB 작업을 마치면 Connection 객체를 명시적으로 닫아야 한다. 리소스 누수를 방지하고 DB 연결을 제대로 해제하기 위함이다.


<u>**그런데 DB 를 연결할 때마다 Connection 객체를 새로 만드는 것은 비용이 많이 들고 비효율적이다.**</u>

1. 네트워크 비용: DB 연결을 설정하는 과정은 네트워크 통신을 동반한다.
새로운 Connection 객체를 생성할 때마다 DB 서버와의 네트워크 연결을 해야 하며, 이 과정은 일정 시간이 소요된다.
따라서 빈번한 Connection 생성은 불필요한 네트워크 비용을 발생시킨다.
2. 리소스 사용: 각 Connection 객체는 DB 서버의 연결 세션을 나타낸다. DB 서버는 동시에 처리할 수 있는 연결 세션 수에 제한이 있으며, 무분별한 Connection 생성은 서버 리소스를 소모할 수 있다.
3. 비용적 측면: Connection 객체 생성은 시간과 메모리를 소모한다.
특히 DB 연결 설정 및 인증 과정은 비용이 큰 작업이다.

## DB Connection Pool

위에서 살펴본 Connection 객체의 반복적인 생성과 해제를 피하고, 효율적으로 데이터베이스 연결을 관리하기 위해 Connection 풀링이 사용된다.

